(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-extend-upload-upload"],{"0bbc":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-fa0e7fee]{background-color:#fff}.container[data-v-fa0e7fee]{padding:%?20?% 0 %?120?% 0;box-sizing:border-box}.header[data-v-fa0e7fee]{padding:%?80?% %?90?% %?60?% %?90?%;box-sizing:border-box}.title[data-v-fa0e7fee]{font-size:%?34?%;color:#333;font-weight:500}.sub-title[data-v-fa0e7fee]{font-size:%?24?%;color:#7a7a7a;padding-top:%?18?%}.tui-box-upload[data-v-fa0e7fee]{padding-left:%?25?%;box-sizing:border-box}body.?%PAGE?%[data-v-fa0e7fee]{background-color:#fff}",""]),t.exports=e},"0d96":function(t,e,a){"use strict";a.r(e);var i=a("6723"),n=a("618b");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("613a");var r,s=a("f0c5"),u=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"fa0e7fee",null,!1,i["a"],r);e["default"]=u.exports},"11a9":function(t,e,a){"use strict";a.r(e);var i=a("bd62"),n=a("aac2");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("7382");var r,s=a("f0c5"),u=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"e9a6f05e",null,!1,i["a"],r);e["default"]=u.exports},"1ce7":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@font-face{font-family:tuiUpload;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAATcAA0AAAAAByQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEwAAAABoAAAAciR52BUdERUYAAASgAAAAHgAAAB4AKQALT1MvMgAAAaAAAABCAAAAVjxvR/tjbWFwAAAB+AAAAEUAAAFK5ibpuGdhc3AAAASYAAAACAAAAAj//wADZ2x5ZgAAAkwAAADXAAABAAmNjcZoZWFkAAABMAAAAC8AAAA2FpiS+WhoZWEAAAFgAAAAHQAAACQH3QOFaG10eAAAAeQAAAARAAAAEgwAACBsb2NhAAACQAAAAAwAAAAMAEoAgG1heHAAAAGAAAAAHwAAACABEgA2bmFtZQAAAyQAAAFJAAACiCnmEVVwb3N0AAAEcAAAACgAAAA6OMUs4HjaY2BkYGAAYo3boY/i+W2+MnCzMIDAzb3qdQj6fwPzf+YGIJeDgQkkCgA/KAtvAHjaY2BkYGBu+N/AEMPCAALM/xkYGVABCwBZ4wNrAAAAeNpjYGRgYGBl0GJgZgABJiDmAkIGhv9gPgMADTABSQB42mNgZGFgnMDAysDA1Ml0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDA7PGJ9xMjf8b2CIYW5gaAAKM4LkANt9C+UAAHjaY2GAABYIVmBgAAAA+gAtAAAAeNpjYGBgZoBgGQZGBhBwAfIYwXwWBg0gzQakGRmYnjE+4/z/n4EBQksxSf6GqgcCRjYGOIeRCUgwMaACRoZhDwCiLwmoAAAAAAAAAAAAAAAASgCAeNpdjkFKw0AARf/vkIR0BkPayWRKQZtYY90ohJju2kOIbtz0KD1HVm50UfEmWXoAr9ADOHFARHHzeY//Fx8Ci+FJfIgdJFa4AhgiMshbrCuIsLxhFJZVs+Vl1bT1GddtbXTC3OhohN4dg4BJ3zMJAnccyfm468ZzHXddrH9ZKbHzdf9n/vkY/xv9sPQXgGEvBrHHwst5kTbXLE+YpYVPkxepPmW94W16UbdNJd6f3SAzo5W7m1jaKd+8ZZIvk5nlKw9SK6Wle7BLS3f/bTzQLmfAF2T1NsQAeNp9kD1OAzEQhZ/zByQSQiCoXVEA2vyUKRMp9Ailo0g23pBo1155nUg5AS0VB6DlGByAGyDRcgpelkmTImvt6PObmeexAZzjGwr/3yXuhBWO8ShcwREy4Sr1F+Ea+V24jhY+hRvUf4SbuFUD4RYu1BsdVO2Eu5vSbcsKZxgIV3CKJ+Eq9ZVwjfwqXMcVPoQb1L+EmxjjV7iFa2WpDOFhMEFgnEFjig3jAjEcLJIyBtahOfRmEsxMTzd6ETubOBso71dilwMeaDnngCntPbdmvkon/mDLgdSYbh4FS7YpjS4idCgbXyyc1d2oc7D9nu22tNi/a4E1x+xRDWzU/D3bM9JIbAyvkJI18jK3pBJTj2hrrPG7ZynW814IiU68y/SIx5o0dTr3bmniwOLn8owcfbS5kj33qBw+Y1kIeb/dTsQgil2GP5PYcRkAAAB42mNgYoAALjDJyIAOWMGiTIxMjMxsKak5qSWpbFmZiRmJ+QAmgAUIAAAAAf//AAIAAQAAAAwAAAAWAAAAAgABAAMABAABAAQAAAACAAAAAHjaY2BgYGQAgqtL1DlA9M296nUwGgA+8QYgAAA=) format("woff");font-weight:400;font-style:normal}.tui-upload-icon[data-v-e9a6f05e]{font-family:tuiUpload!important;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:%?10?%}.tui-icon-delete[data-v-e9a6f05e]:before{content:"\\e601"}.tui-icon-plus[data-v-e9a6f05e]:before{content:"\\e609"}.tui-upload-box[data-v-e9a6f05e]{width:100%;display:flex;flex-wrap:wrap}.tui-upload-add[data-v-e9a6f05e]{font-size:%?68?%;font-weight:100;color:#888;background-color:#f7f7f7;display:flex;align-items:center;justify-content:center;padding:0}.tui-image-item[data-v-e9a6f05e]{position:relative;margin-right:%?20?%;margin-bottom:%?20?%}.tui-image-item[data-v-e9a6f05e]:nth-of-type(3n){margin-right:0}.tui-item-img[data-v-e9a6f05e]{display:block}.tui-img-del[data-v-e9a6f05e]{width:%?36?%;height:%?36?%;position:absolute;right:%?-12?%;top:%?-12?%;background-color:#eb0909;border-radius:50%;color:#fff;font-size:%?34?%;z-index:999}.tui-img-del[data-v-e9a6f05e]::before{content:"";width:%?16?%;height:1px;position:absolute;left:%?10?%;top:%?18?%;background-color:#fff}.tui-upload-mask[data-v-e9a6f05e]{width:100%;height:100%;position:absolute;left:0;top:0;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?40?% 0;box-sizing:border-box;background-color:rgba(0,0,0,.6)}.tui-upload-loading[data-v-e9a6f05e]{width:%?28?%;height:%?28?%;border-radius:50%;border:2px solid;border-color:#b2b2b2 #b2b2b2 #b2b2b2 #fff;-webkit-animation:tui-rotate-data-v-e9a6f05e .7s linear infinite;animation:tui-rotate-data-v-e9a6f05e .7s linear infinite}@-webkit-keyframes tui-rotate-data-v-e9a6f05e{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes tui-rotate-data-v-e9a6f05e{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.tui-tips[data-v-e9a6f05e]{font-size:%?26?%;color:#fff}.tui-mask-btn[data-v-e9a6f05e]{padding:%?4?% %?16?%;border-radius:%?40?%;text-align:center;font-size:%?24?%;color:#fff;border:1px solid #fff;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:%?26?%}.tui-btn-hover[data-v-e9a6f05e]{opacity:.8}',""]),t.exports=e},"231d":function(t,e,a){var i=a("0bbc");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("787a6033",i,!0,{sourceMap:!1,shadowMode:!1})},"2d71":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{imageData:[],serverUrl:"https://api.thorui.cn/",value:[]}},onLoad:function(){var t=this;setTimeout((function(){t.value=["https://thorui.cn/images/index/logo.png"]}),200)},methods:{result:function(e){t("log",e," at pages/extend/upload/upload.vue:31"),this.imageData=e.imgArr},remove:function(e){t("log",e," at pages/extend/upload/upload.vue:36");e.index}}};e.default=a}).call(this,a("0de9")["log"])},"613a":function(t,e,a){"use strict";var i=a("231d"),n=a.n(i);n.a},"618b":function(t,e,a){"use strict";a.r(e);var i=a("2d71"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},6723:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={tuiUpload:a("11a9").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"header"},[a("v-uni-view",{staticClass:"title"},[t._v("upload")]),a("v-uni-view",{staticClass:"sub-title"},[t._v("图片上传，需要根据上传接口实际返回数据进行调整")])],1),a("v-uni-view",{staticClass:"tui-box-upload"},[a("tui-upload",{attrs:{value:t.value,serverUrl:t.serverUrl},on:{complete:function(e){arguments[0]=e=t.$handleEvent(e),t.result.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.remove.apply(void 0,arguments)}}})],1)],1)},o=[]},"69aa":function(t,e,a){var i=a("1ce7");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("08f18d27",i,!0,{sourceMap:!1,shadowMode:!1})},7382:function(t,e,a){"use strict";var i=a("69aa"),n=a.n(i);n.a},aac2:function(t,e,a){"use strict";a.r(e);var i=a("f043"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},b85c:function(t,e,a){"use strict";a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var i=n(a("06c5"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=(0,i.default)(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,u=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return s=t.done,t},e:function(t){u=!0,r=t},f:function(){try{s||null==a["return"]||a["return"]()}finally{if(u)throw r}}}}},bd62:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"tui-container"},[a("v-uni-view",{staticClass:"tui-upload-box"},[t._l(t.imageList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"tui-image-item",style:{width:t.width+"rpx",height:t.height+"rpx"}},[a("v-uni-image",{staticClass:"tui-item-img",style:{width:t.width+"rpx",height:t.height+"rpx"},attrs:{src:e,mode:"aspectFill"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.previewImage(i)}}}),t.forbidDel?t._e():a("v-uni-view",{staticClass:"tui-img-del",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.delImage(i)}}}),1!=t.statusArr[i]?a("v-uni-view",{staticClass:"tui-upload-mask"},[2==t.statusArr[i]?a("v-uni-view",{staticClass:"tui-upload-loading"}):t._e(),a("v-uni-text",{staticClass:"tui-tips"},[t._v(t._s(2==t.statusArr[i]?"上传中...":"上传失败"))]),3==t.statusArr[i]?a("v-uni-view",{staticClass:"tui-mask-btn",attrs:{"hover-class":"tui-btn-hover","hover-stay-time":150},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.reUpLoad(i)}}},[t._v("重新上传")]):t._e()],1):t._e()],1)})),t.isShowAdd?a("v-uni-view",{staticClass:"tui-upload-add",style:{width:t.width+"rpx",height:t.height+"rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"tui-upload-icon tui-icon-plus"})],1):t._e()],2)],1)},o=[]},f043:function(t,e,a){"use strict";var i=a("4ea4");a("c975"),a("a434"),a("a9e3"),a("d3b7"),a("ac1f"),a("5319"),a("1276"),a("2ca0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("b85c")),o=i(a("2909")),r={name:"tuiUpload",emits:["remove","complete"],props:{width:{type:[Number,String],default:220},height:{type:[Number,String],default:220},value:{type:Array,default:function(){return[]}},delConfirm:{type:Boolean,default:!1},forbidDel:{type:Boolean,default:!1},forbidAdd:{type:Boolean,default:!1},serverUrl:{type:String,default:""},limit:{type:Number,default:9},sizeType:{type:Array,default:function(){return["original","compressed"]}},sourceType:{type:Array,default:function(){return["album","camera"]}},imageFormat:{type:Array,default:function(){return[]}},size:{type:Number,default:4},fileKeyName:{type:String,default:"file"},header:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},params:{type:[Number,String],default:0}},data:function(){return{imageList:[],statusArr:[]}},created:function(){this.initImages()},watch:{value:function(t){t&&this.initImages()}},computed:{isShowAdd:function(){var t=!0;return(this.forbidAdd||this.limit&&this.imageList.length>=this.limit)&&(t=!1),t}},methods:{initImages:function(){this.statusArr=[],this.imageList=(0,o.default)(this.value);var t,e=(0,n.default)(this.imageList);try{for(e.s();!(t=e.n()).done;){t.value;this.statusArr.push("1")}}catch(a){e.e(a)}finally{e.f()}},reUpLoad:function(t){var e=this;this.$set(this.statusArr,t,"2"),this.change(),this.uploadImage(t,this.imageList[t]).then((function(){e.change()})).catch((function(){e.change()}))},change:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=~this.statusArr.indexOf("2")?2:1;2!=e&&~this.statusArr.indexOf("3")&&(e=3),this.$emit("complete",{status:e,imgArr:this.imageList,params:this.params,manual:t})},toast:function(t){t&&uni.showToast({title:t,icon:"none"})},chooseImage:function(){var t=this;uni.chooseImage({count:t.limit-t.imageList.length,sizeType:t.sizeType,sourceType:t.sourceType,success:function(e){for(var a=[],i=0;i<e.tempFiles.length;i++){var n=t.imageList.length;if(n>=t.limit){t.toast("最多可上传".concat(t.limit,"张图片"));break}var o=e.tempFiles[i].path;if(t.imageFormat.length>0){var r="",s=e.tempFiles[i].type;if(r=s.split("/")[1],-1==t.imageFormat.indexOf(r)){var u="只能上传 ".concat(t.imageFormat.join(",")," 格式图片！");t.toast(u);continue}}var A=e.tempFiles[i].size;if(1024*t.size*1024<A){var f="单张图片大小不能超过：".concat(t.size,"MB");t.toast(f)}else a.push(o),t.imageList.push(o),t.statusArr.push("2")}t.change();for(var l=t.imageList.length-a.length,c=0;c<a.length;c++){var d=l+c;t.serverUrl?t.uploadImage(d,a[c]).then((function(){t.change()})).catch((function(){t.change()})):(t.$set(t.statusArr,d,"1"),t.change())}}})},uploadImage:function(t,e,a){var i=this,n=this;return new Promise((function(o,r){uni.uploadFile({url:i.serverUrl||a,name:i.fileKeyName,header:i.header,formData:i.formData,filePath:e,success:function(e){if(200==e.statusCode){var a=JSON.parse(e.data.replace(/\ufeff/g,"")||"{}");a.code%100===0?(a.url&&(n.imageList[t]=a.url),n.$set(n.statusArr,t,a.url?"1":"3")):n.$set(n.statusArr,t,"3"),o(t)}else n.$set(n.statusArr,t,"3"),r(t)},fail:function(e){n.$set(n.statusArr,t,"3"),r(t)}})}))},delImage:function(t){var e=this;this.delConfirm?uni.showModal({title:"提示",content:"确认删除该图片吗？",showCancel:!0,cancelColor:"#555",confirmColor:"#eb0909",confirmText:"确定",success:function(a){a.confirm&&(e.imageList.splice(t,1),e.statusArr.splice(t,1),e.$emit("remove",{index:t,params:e.params}),e.change())}}):(e.imageList.splice(t,1),e.statusArr.splice(t,1),e.$emit("remove",{index:t,params:e.params}),e.change())},previewImage:function(t){this.imageList.length&&uni.previewImage({current:this.imageList[t],loop:!0,urls:this.imageList})},uploadAllImage:function(t){var e=this;if(t)for(var a=(0,o.default)(this.imageList),i=a.length,n=function(n){if(a[n].startsWith("https"))return"continue";e.$set(e.statusArr,n,"2"),e.uploadImage(n,a[n],t).then((function(){n===i-1&&e.change(!0)})).catch((function(){n===i-1&&e.change(!0)}))},r=0;r<i;r++)n(r);else this.toast("服务器接口地址不能为空！")}}};e.default=r}}]);